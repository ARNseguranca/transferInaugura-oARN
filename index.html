<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transfer Especial Volvo Euroville para Evento de Inaugura√ß√£o</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<style>
  body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: linear-gradient(135deg, #1a1a2e, #162447, #1f4068);
    color: #fff;
    overflow-x: hidden;
  }

  header {
    display: flex;
    align-items: center;
    background: rgba(25,25,40,0.85);
    color: #00e0ff;
    padding: 16px 24px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0,255,255,0.25);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(0,224,255,0.2);
  }

  header img {
    height: 50px;
    margin-right: 18px;
    border-radius: 12px;
    background: #fff;
    padding: 6px;
    box-shadow: 0 0 12px rgba(0,224,255,0.5);
  }

  header h1 {
    font-size: 1.5rem;
    margin: 0;
    font-weight: 700;
    letter-spacing: 1px;
    text-shadow: 0 0 8px #00e0ff;
  }

  #statusBanner {
    position: fixed;
    top: 80px;
    left: 0;
    width: 100%;
    text-align: center;
    padding: 10px;
    font-weight: bold;
    display: none;
    z-index: 2000;
    border-radius: 0 0 10px 10px;
  }

  #statusBanner.offline { background-color: #ff4c4c; color: white; display: block; }
  #statusBanner.online { background-color: #00cc66; color: white; display: block; }

  #map {
    margin-top: 100px;
    height: calc(100vh - 100px);
    width: 95%;
    margin-left: auto;
    margin-right: auto;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,224,255,0.35);
    transition: all 0.3s ease;
  }

  #formAgendamento {
    position: fixed;
    top: 140px;
    right: 20px;
    background: rgba(20,20,30,0.95);
    border-radius: 20px;
    padding: 24px;
    width: 300px;
    box-shadow: 0 0 30px rgba(0,224,255,0.5);
    display: none;
    z-index: 1001;
    color: #fff;
    animation: fadeIn 0.4s ease-in-out;
    border: 1px solid rgba(0,224,255,0.6);
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(-20px);}
    to {opacity: 1; transform: translateY(0);}
  }

  #formAgendamento h3 { 
    margin: 0 0 14px; 
    font-size: 1.3rem; 
    color: #00e0ff; 
    text-align: center; 
    text-shadow: 0 0 10px #00e0ff;
  }

  #formAgendamento label { 
    display: block; 
    margin-top: 14px; 
    font-weight: 500; 
    font-size: 0.95rem;
  }

  #formAgendamento input {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border: none;
    border-radius: 12px;
    font-size: 0.95rem;
    background: #1e1e2f;
    color: #00e0ff;
    outline: none;
    box-shadow: inset 0 0 6px rgba(0,224,255,0.3);
    transition: 0.3s;
  }

  #formAgendamento input:focus {
    box-shadow: 0 0 12px rgba(0,224,255,0.7);
  }

  #formAgendamento button {
    margin-top: 20px;
    background: linear-gradient(135deg, #00e0ff, #0078d7);
    color: white;
    border: none;
    padding: 12px;
    width: 100%;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    transition: 0.3s;
    box-shadow: 0 0 16px rgba(0,224,255,0.6);
  }

  #formAgendamento button:hover { 
    background: linear-gradient(135deg, #0099cc, #005bb5); 
    box-shadow: 0 0 20px rgba(0,224,255,1);
  }

  #closeForm { 
    position: absolute; 
    top: 10px; 
    right: 14px; 
    cursor: pointer; 
    color: #00e0ff; 
    font-weight: bold; 
    font-size: 1.3rem;
    text-shadow: 0 0 6px #00e0ff;
  }

  /* Overlay de bloqueio */
  #partnerLogoOverlay {
    position: fixed;
    top:0; left:0;
    width:100%;
    height:100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 3000;
    flex-direction: column;
    color: #fff;
    text-align: center;
  }

  #partnerLogoOverlay img {
    max-width: 250px;
    border-radius: 12px;
    box-shadow: 0 0 25px rgba(0,224,255,0.8);
    animation: floatLogo 3s ease-in-out infinite;
  }

  @keyframes floatLogo {
    0%, 100% { transform: translateY(-10px); }
    50% { transform: translateY(10px); }
  }

  #partnerLogoOverlay p {
    margin-top: 30px;
    font-size: 1.3rem;
    color: #ffcc00;
    font-weight: bold;
    text-shadow: 0 0 8px #ff6600;
  }
</style>
</head>
<body>

<header>
  <img src="logo-nascentes.jpg" alt="Logo">
  <h1>Transfer Especial Volvo Euroville para Evento de Inaugura√ß√£o</h1>
</header>

<div id="statusBanner"></div>
<div id="map"></div>

<!-- Formul√°rio -->
<div id="formAgendamento">
  <span id="closeForm">√ó</span>
  <h3>Agendar Ponto</h3>
  <form id="form" action="https://docs.google.com/forms/d/e/1FAIpQLSedg-XNufEu483TWf-WlAHpl4z8Fq-HEjH0XvOIhR6Y1YshOg/formResponse" method="POST" target="hidden_iframe">
    <label for="nome">Nome do Solicitante:</label>
    <input type="text" id="nome" name="entry.1813093835" required>

    <label for="ponto">Ponto:</label>
    <input type="text" id="ponto" name="entry.1553871928" readonly required>

    <label for="horario">Hor√°rio da Marca√ß√£o:</label>
    <input type="text" id="horario" name="entry.1757535250" readonly required>

    <button type="submit">Agendar</button>
  </form>
</div>

<!-- Overlay de bloqueio -->
<div id="partnerLogoOverlay">
  <img src="Volvo.jpg" alt="Parceiro Nascentes">
  <p>‚ö†Ô∏è Dispon√≠vel apenas em 20/09/2025 √†s 18:50</p>
</div>

<iframe name="hidden_iframe" style="display:none;"></iframe>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
var map = L.map('map').setView([-19.99752, -43.92611], 17);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap' }).addTo(map);

var busIcon = L.icon({ iconUrl: 'Ponto.png', iconSize: [36,36], iconAnchor: [18,36], popupAnchor:[0,-36] });
var userIcon = L.icon({
  iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",
  iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34]
});

var pontos = [
  {nome:"PORTARIA", coords:[-19.9978072, -43.9266727]},
  {nome:"Ponto 30", coords:[-19.9977078, -43.9289372]},
  {nome:"Ponto 28", coords:[-19.9986592, -43.9306448]},
  {nome:"Ponto 29", coords:[-19.999421, -43.9326796]},
  {nome:"Ponto 27", coords:[-20.0002531, -43.9314901]},
  {nome:"Ponto 26", coords:[-20.0015469, -43.9333477]},
  {nome:"Ponto 24", coords:[-20.003258, -43.9296246]},
  {nome:"Ponto 25", coords:[-20.0050238, -43.9308419]},
  {nome:"Ponto 21", coords:[-20.0027213, -43.9338594]},
  {nome:"Ponto 22", coords:[-20.001474, -43.9355339]},
  {nome:"Ponto 23", coords:[-20.0031588, -43.9364208]},
  {nome:"Ponto 20", coords:[-20.0063663, -43.934352]},
  {nome:"Ponto 19", coords:[-20.0085746, -43.9318072]},
  {nome:"Ponto 17", coords:[-20.0104645, -43.9320381]},
  {nome:"Ponto 18", coords:[-20.0088433, -43.9343321]},
  {nome:"Ponto 12", coords:[-20.0088434, -43.9288248]},
  {nome:"Ponto 13", coords:[-20.0094456, -43.9269802]},
  {nome:"Ponto 14", coords:[-20.0075172, -43.9277972]},
  {nome:"Ponto 16", coords:[-20.0068404, -43.9290337]},
  {nome:"Ponto 15", coords:[-20.0079616, -43.9293497]},
  {nome:"Ponto 09", coords:[-20.0110997, -43.9309597]},
  {nome:"Ponto 10", coords:[-20.0120307, -43.9334509]},
  {nome:"Ponto 11", coords:[-20.0098192, -43.9337648]},
  {nome:"Ponto 08", coords:[-20.0102615, -43.9273848]},
  {nome:"Ponto 05", coords:[-20.0114455, -43.9257426]},
  {nome:"Ponto 06", coords:[-20.0112228, -43.9276231]},
  {nome:"Ponto 07", coords:[-20.0108785, -43.9296971]},
  {nome:"Ponto 04", coords:[-20.0068997, -43.9238609]},
  {nome:"Ponto 03", coords:[-20.0047577, -43.9260624]},
  {nome:"Ponto 02", coords:[-20.001753, -43.9270223]}
];

var formBox = document.getElementById("formAgendamento");
var pontoInput = document.getElementById("ponto");
var horarioInput = document.getElementById("horario");
var closeBtn = document.getElementById("closeForm");
var partnerOverlay = document.getElementById("partnerLogoOverlay");

closeBtn.onclick = () => formBox.style.display = "none";

var dataLiberacao = new Date("2025-09-20T19:00:00");

function verificarDisponibilidade() {
  var agora = new Date();
  partnerOverlay.style.display = agora >= dataLiberacao ? "none" : "flex";
}
setInterval(verificarDisponibilidade, 1000);
verificarDisponibilidade();

pontos.forEach(p => {
  L.marker(p.coords, {icon: busIcon}).addTo(map).on('click', function() {
    var agora = new Date();
    if (agora < dataLiberacao) {
      alert("‚ö†Ô∏è O agendamento estar√° dispon√≠vel somente em 20/09/2025 √†s 19:00.");
      return;
    }
    pontoInput.value = p.nome;
    var horas = agora.getHours().toString().padStart(2,"0");
    var minutos = agora.getMinutes().toString().padStart(2,"0");
    horarioInput.value = `${horas}:${minutos}`;
    formBox.style.display = "block";
  });
});

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(function(position) {
    L.marker([position.coords.latitude, position.coords.longitude], {icon: userIcon})
      .addTo(map)
      .bindPopup("üìç Voc√™ est√° aqui")
      .openPopup();
    map.setView([position.coords.latitude, position.coords.longitude], 17);
  });
}

document.getElementById("form").addEventListener("submit", function(e){
  e.preventDefault();
  if (!navigator.onLine) { alert("‚ö†Ô∏è Sem internet. O agendamento n√£o foi feito."); return; }
  this.submit();
  alert("‚úÖ Agendamento feito com sucesso!");
  formBox.style.display = "none";
  this.reset();
});

const statusBanner = document.getElementById("statusBanner");
function atualizarStatus() {
  if (navigator.onLine) {
    statusBanner.textContent = "‚úÖ Conex√£o restabelecida";
    statusBanner.className = "online";
    setTimeout(() => { statusBanner.style.display = "none"; }, 3000);
  } else {
    statusBanner.textContent = "‚ö†Ô∏è Sem conex√£o com a internet";
    statusBanner.className = "offline";
  }
}
window.addEventListener("online", atualizarStatus);
window.addEventListener("offline", atualizarStatus);
atualizarStatus();
</script>
</body>
</html>

